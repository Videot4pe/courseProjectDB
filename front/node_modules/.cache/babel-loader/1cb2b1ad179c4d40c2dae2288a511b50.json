{"ast":null,"code":"var _jsxFileName = \"/Users/garanya/Desktop/dbcourse/courseProjectDB/front/src/App.js\";\nimport React, { Component } from 'react';\nimport { Document, Page } from 'react-pdf';\nimport './App.css';\nimport * as ReactDOM from 'react-dom';\nimport style from 'bootstrap/dist/css/bootstrap.css';\nimport * as NeoVis from 'neovis.js/dist/neovis.js';\nimport $ from 'jquery';\nimport { pdfjs } from 'react-pdf';\nimport file from './RPZ.pdf';\npdfjs.GlobalWorkerOptions.workerSrc = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version, \"/pdf.worker.js\");\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onDocumentLoadSuccess = ({\n      numPages\n    }) => {\n      this.setState({\n        numPages\n      });\n    };\n\n    this.goToPrevPage = () => this.setState(state => ({\n      pageNumber: state.pageNumber - 1\n    }));\n\n    this.goToNextPage = () => this.setState(state => ({\n      pageNumber: state.pageNumber + 1\n    }));\n\n    this.draw = async () => {\n      var cw = $('#viz').width();\n      $('#viz').css({\n        'height': cw + 'px'\n      });\n      var config = {\n        container_id: \"viz\",\n        server_url: \"bolt://localhost:7687\",\n        server_user: \"neo4j\",\n        server_password: \"lotusflower99\",\n        labels: {\n          \"City\": {\n            caption: \"name\",\n            size: \"pagerank\",\n            community: \"community\"\n          }\n        },\n        relationships: {\n          \"CAN_GET_TO\": {\n            caption: \"dist\",\n            thickness: \"count\"\n          }\n        },\n        initial_cypher: \"MATCH p=(:City)-[:CAN_GET_TO]->(:City) RETURN p\"\n      };\n      this.viz = new NeoVis.default(config);\n      this.viz.render();\n      this.viz.stabilize();\n    };\n\n    this.callInit = async () => {\n      var response = await fetch('/init');\n      var body = await response.json();\n      this.state.cities = body;\n      var firstbox = document.getElementById('first');\n      var secondbox = document.getElementById('second');\n\n      for (var i = 0; i < this.state.cities.length; i++) {\n        var option = this.state.cities[i];\n        console.log(typeof this.state.cities[i]);\n        firstbox.options.add(new Option(option, i));\n        secondbox.options.add(new Option(option, i));\n      }\n    };\n\n    this.searchThis = async () => {\n      const response = await fetch('/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          cities: {\n            firstCity: this.state.firstCity,\n            secondCity: this.state.secondCity\n          }\n        })\n      });\n      const body = await response.json();\n      this.state.resultDist = \"Кратчайшее расстояние: \" + body + \" км\";\n      this.forceUpdate();\n    };\n\n    this.addCity = async () => {\n      const response = await fetch('/add_city', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: this.state.add\n        })\n      });\n      this.callInit();\n      this.forceUpdate();\n    };\n\n    this.addRel = async () => {\n      this.state.firstCity = this.state.cities[document.getElementById(\"first\").value];\n      this.state.secondCity = this.state.cities[document.getElementById(\"second\").value];\n      const response = await fetch('/add_rel', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          firstCity: this.state.firstCity,\n          secondCity: this.state.secondCity,\n          dist: this.state.addRel\n        })\n      });\n    };\n\n    this.state = {\n      showComponent: false,\n      data: null,\n      firstCity: \"\",\n      secondCity: \"\",\n      resultWay: \"\",\n      resultDist: \"Кратчайшее расстояние: \",\n      cities: [],\n      add: \"\",\n      addRel: \"\",\n      viz: [],\n      numPages: null,\n      pageNumber: 1\n    };\n  }\n\n  changeToRPZ(event) {\n    document.getElementById(\"viz\").style.display = \"none\";\n    document.getElementById(\"rpz\").style.display = \"block\";\n  }\n\n  changeToGraph(event) {\n    document.getElementById(\"rpz\").style.display = \"none\";\n    document.getElementById(\"viz\").style.display = \"block\";\n  }\n\n  componentDidMount() {\n    window.addEventListener('load', this.callInit);\n    window.addEventListener('load', this.draw);\n  }\n\n  search(event) {\n    this.state.firstCity = this.state.cities[document.getElementById(\"first\").value];\n    this.state.secondCity = this.state.cities[document.getElementById(\"second\").value];\n    this.searchThis();\n    this.forceUpdate();\n  }\n\n  addText(event) {\n    this.state.add = event.target.value;\n    this.forceUpdate();\n  }\n\n  addRelText(event) {\n    this.state.addRel = event.target.value;\n    this.forceUpdate();\n  }\n\n  render() {\n    const pageNumber = this.state.pageNumber;\n    const numPages = this.state.numPages;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      class: \"nav nav-pills float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      class: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.changeToGraph.bind(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"\\u0413\\u0440\\u0430\\u0444\")), React.createElement(\"li\", {\n      class: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.changeToRPZ.bind(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"\\u0420\\u041F\\u0417\")))), React.createElement(\"h3\", {\n      class: \"text-muted\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442 \\u043F\\u043E \\u0431\\u0430\\u0437\\u0430\\u043C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"switch\",\n      class: \"col-lg-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"viz\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \" \"), React.createElement(\"div\", {\n      id: \"rpz\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"pdfbut\",\n      onClick: this.goToPrevPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Prev\"), React.createElement(\"button\", {\n      id: \"pdfbut\",\n      onClick: this.goToNextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Next\"), React.createElement(Document, {\n      file: file,\n      onLoadSuccess: this.onDocumentLoadSuccess,\n      onLoadError: console.error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Page, {\n      pageNumber: pageNumber,\n      width: 600,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      class: \"col-lg-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0433\\u043E\\u0440\\u043E\\u0434: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"addCity\",\n      onChange: this.addText.bind(this),\n      placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.addCity.bind(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0433\\u043E\\u0440\\u043E\\u0434\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"\\u041A\\u0440\\u0430\\u0442\\u0447\\u0430\\u0439\\u0448\\u0435\\u0435 \\u0440\\u0430\\u0441\\u0441\\u0442\\u043E\\u044F\\u043D\\u0438\\u0435: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \" \\u0418\\u0437 \"), \" \", React.createElement(\"select\", {\n      id: \"first\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), \" \", React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \" \\u0432 \"), \" \", React.createElement(\"select\", {\n      id: \"second\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.search.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0438\\u0441\\u043A\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, this.state.resultDist), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0432\\u044F\\u0437\\u044C: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"addRel\",\n      onChange: this.addRelText.bind(this),\n      placeholder: \"\\u0420\\u0430\\u0441\\u0441\\u0442\\u043E\\u044F\\u043D\\u0438\\u0435 \\u0432 \\u043A\\u043C\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.addRel.bind(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0432\\u044F\\u0437\\u044C\")))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/garanya/Desktop/dbcourse/courseProjectDB/front/src/App.js"],"names":["React","Component","Document","Page","ReactDOM","style","NeoVis","$","pdfjs","file","GlobalWorkerOptions","workerSrc","version","App","constructor","props","onDocumentLoadSuccess","numPages","setState","goToPrevPage","state","pageNumber","goToNextPage","draw","cw","width","css","config","container_id","server_url","server_user","server_password","labels","caption","size","community","relationships","thickness","initial_cypher","viz","default","render","stabilize","callInit","response","fetch","body","json","cities","firstbox","document","getElementById","secondbox","i","length","option","console","log","options","add","Option","searchThis","method","headers","JSON","stringify","firstCity","secondCity","resultDist","forceUpdate","addCity","name","addRel","value","dist","showComponent","data","resultWay","changeToRPZ","event","display","changeToGraph","componentDidMount","window","addEventListener","search","addText","target","addRelText","bind","error"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Document, Page } from 'react-pdf';\nimport './App.css';\nimport * as ReactDOM from 'react-dom';\nimport style from 'bootstrap/dist/css/bootstrap.css';\nimport * as NeoVis from 'neovis.js/dist/neovis.js';\nimport $ from 'jquery';\nimport { pdfjs } from 'react-pdf';\nimport file from './RPZ.pdf';\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showComponent: false,\n      data: null,\n      firstCity: \"\",\n      secondCity: \"\",\n      resultWay: \"\",\n      resultDist: \"Кратчайшее расстояние: \",\n      cities: [],\n      add: \"\",\n      addRel: \"\",\n      viz: [],\n      numPages: null,\n      pageNumber: 1,\n    };\n  }\n\n  onDocumentLoadSuccess = ({ numPages }) => {\n    this.setState({ numPages });\n  };\n\n  goToPrevPage = () =>\n    this.setState(state => ({ pageNumber: state.pageNumber - 1 }));\n\n  goToNextPage = () =>\n    this.setState(state => ({ pageNumber: state.pageNumber + 1 }));\n\n  changeToRPZ(event) {\n    document.getElementById(\"viz\").style.display = \"none\";\n    document.getElementById(\"rpz\").style.display = \"block\";\n  }\n\n  changeToGraph(event) {\n    document.getElementById(\"rpz\").style.display = \"none\";\n    document.getElementById(\"viz\").style.display = \"block\";\n  }\n  \n\n  draw = async () =>  {\n    var cw = $('#viz').width();\n    $('#viz').css({'height':cw+'px'});\n    var config = {\n      container_id: \"viz\",\n      server_url: \"bolt://localhost:7687\",\n      server_user: \"neo4j\",\n      server_password: \"lotusflower99\",\n      labels: {\n          \"City\": {\n              caption: \"name\",\n              size: \"pagerank\",\n              community: \"community\"\n          }\n      },\n      relationships: {\n          \"CAN_GET_TO\": {\n              caption: \"dist\",\n              thickness: \"count\"\n          }\n      },\n      initial_cypher: \"MATCH p=(:City)-[:CAN_GET_TO]->(:City) RETURN p\"\n    }\n    this.viz = new NeoVis.default(config);\n    this.viz.render();\n    this.viz.stabilize();\n  };\n\n  componentDidMount() {\n    window.addEventListener('load', this.callInit);\n    window.addEventListener('load', this.draw);\n  }\n\n  callInit = async () => {\n    var response = await fetch('/init')\n    var body = await response.json();\n    this.state.cities = body;\n\n    var firstbox = document.getElementById('first');\n    var secondbox = document.getElementById('second');\n\n    for(var i = 0; i < this.state.cities.length; i++){\n      var option = this.state.cities[i];\n      console.log(typeof this.state.cities[i]);\n      firstbox.options.add(new Option(option, i) );\n      secondbox.options.add(new Option(option, i) );\n    }\n  };\n\n  searchThis = async () => {\n    const response = await fetch('/', {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n        cities: {\n            firstCity: this.state.firstCity,\n            secondCity: this.state.secondCity\n        }\n      })\n    });\n    const body = await response.json();\n    this.state.resultDist = \"Кратчайшее расстояние: \" + body + \" км\";\n    this.forceUpdate();\n  };\n\n  search(event) {\n    this.state.firstCity = this.state.cities[document.getElementById(\"first\").value]; \n    this.state.secondCity = this.state.cities[document.getElementById(\"second\").value]; \n\n    this.searchThis();    \n    this.forceUpdate();\n  }\n\n  addCity = async () => {\n    const response = await fetch('/add_city', {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n        name: this.state.add\n      })\n    });\n    this.callInit();\n    this.forceUpdate();\n  }\n\n  addText(event) {\n    this.state.add = event.target.value;\n    this.forceUpdate();\n  }\n\n  addRel = async () => {\n    this.state.firstCity = this.state.cities[document.getElementById(\"first\").value]; \n    this.state.secondCity = this.state.cities[document.getElementById(\"second\").value]; \n\n    const response = await fetch('/add_rel', {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n        firstCity: this.state.firstCity,\n        secondCity: this.state.secondCity,\n        dist: this.state.addRel\n      })\n    });\n  }\n\n  addRelText(event) {\n    this.state.addRel = event.target.value;\n    this.forceUpdate();\n  }\n\n  render() {\n    const pageNumber = this.state.pageNumber;\n    const numPages = this.state.numPages;\n    return (\n      <div className=\"App\">\n\n        <div class=\"container\">\n          <div class=\"header\">\n            <nav>\n              <ul class=\"nav nav-pills float-right\">\n                <li class=\"nav-item\">\n                  <button onClick={this.changeToGraph.bind()}>Граф</button>\n                </li>\n                <li class=\"nav-item\">\n                  <button onClick={this.changeToRPZ.bind()}>РПЗ</button>\n                </li>\n              </ul>\n            </nav>\n            <h3 class=\"text-muted\">Курсовой проект по базам данных</h3>\n          </div>\n          <br/>\n          <div class=\"row\">\n            <div id=\"switch\" class=\"col-lg-8\"> \n              <div id=\"viz\"> </div>\n              <div id=\"rpz\"><br/>\n                <nav>\n                  <div>\n                    <button id=\"pdfbut\" onClick={this.goToPrevPage}>Prev</button><button id=\"pdfbut\" onClick={this.goToNextPage}>Next</button>\n                    <Document file={file} onLoadSuccess={this.onDocumentLoadSuccess} onLoadError={console.error}>\n                      <Page pageNumber={pageNumber} width={600} />\n                    </Document>\n                  </div>\n                </nav>\n              </div>\n            </div>   \n\n            <div class=\"col-lg-4\">\n              <br /><h3>Добавить город: </h3>\n              <br /><input type=\"text\" id=\"addCity\" onChange={this.addText.bind(this)} placeholder=\"Название города\"/>\n              <br /><br /><button onClick={this.addCity.bind()}>Добавить город</button><br />\n              <hr></hr>\n              <h3>Кратчайшее расстояние: </h3>\n              <br /><p> Из </p> <select id=\"first\"></select> <p> в </p> <select id=\"second\"></select>\n              <br /><br /><button onClick={this.search.bind(this)}>Поиск</button>\n              <br /><br /><p>{this.state.resultDist}</p>\n              <hr></hr>\n              <h3>Добавить связь: </h3>\n              <br /><input type=\"text\" id=\"addRel\" onChange={this.addRelText.bind(this)} placeholder=\"Расстояние в км\"/>\n              <br /><br /><button onClick={this.addRel.bind()}>Добавить связь</button>\n            </div>\n          </div>\n        </div>\n       </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}